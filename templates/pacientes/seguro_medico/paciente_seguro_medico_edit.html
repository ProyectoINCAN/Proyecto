
  <div class="modal-content modal-lg-8 ">
    <form role="form" id="eventoForm"
          action="{% url 'pacientes:paciente_seguro_medico_editar' object.pk %}" method="post">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">x</button>
        <h3>Seguro MÃ©dico</h3>
      </div>
      <div class="modal-body">
        {% csrf_token %}
          <div class="panel-body">
            {% csrf_token %}
            {% for field in form %}
            <div class="form-group " id="{{ field.name }}">
            <div class="col-md-10 ">
              {{ field.errors }}
              <label for="{{ field.name }}" class="col-sm-2 control-label">{{ field.label }}:</label>
              <div class="col-sm-10">
                {{ field }}
              </div>
            </div>
            </div>
            {% endfor %}
          </div>

      </div>
      <div class="modal-footer">
        <div class="col-lg-12 text-right">
          <input type="submit" class="btn btn-primary" name="submit" value="Guardar">
          <button type="button" class="btn btn-default" onclick="return cerrar_modal()">
            Cancelar
          </button>
        </div>
      </div>
    </form>
    <script language="JavaScript">
        detalle = document.getElementById('detalle')
         val = $("#id_seguro_medico").val()
        console.log('valor=', val);
        if (val == 0){
            console.log('entro');
            detalle.style.display = 'block';
            document.getElementById('id_detalle').focus();
        }else {
            detalle.style.display = 'none';
        }
        $("#id_seguro_medico").change(function(){
            valor = $("#id_seguro_medico").val()
            console.log('valor=', valor);
            if(valor == 0) {

                detalle.style.display = 'block';
                document.getElementById('id_detalle').focus();
            }else{
                detalle.style.display = 'none';
            }

	      });
        $("#eventoForm").submit(function(e) {

            var url = this.action; // the script where you handle the form input.
            console.log(url)
            $.ajax({
                   type: "POST",
                   url: url,
                   data: $("#eventoForm").serialize(), // serializes the form's elements.
                   success: function(data, status) {
                       if (data.success){
                           $('#popup').modal('hide');
                           location.reload();
                       }else {
                           $('#eventoForm').html(data);
                       }

                   },
                error: function(ajaxContext) {

                   alert(ajaxContext.responseText);

                },
                done: function (response) {
                    $('#popup').modal('hide');
                }
            });
            e.preventDefault(); // avoid to execute the actual submit of the form.

	      });
    </script>
  </div>
