{% extends 'base/base2.html' %}


{% block extrajs %}

    <script type="text/javascript">
        $(function() {

            $("#limpiar").click(function () {
                 $("#id_paciente").val('');
                 $("#paciente_label").val('');

            });
            $().toastmessage('showSuccessToast', "Hello there! Message is shown.");
            var id_paciente;
            $("#paciente_label").autocomplete({
                source: "/pacientes/autocomplete_nombres/",
                minLength : 1,
                select: function (event, ui) {
                    id_paciente = ui.item.id;
                    $("#id_paciente").val(id_paciente);
                    $("#paciente_label").val(ui.item.label);

                }

            });

        });

</script>

{% endblock %}


{% block content %}
<br>

<div class ="row">
<div class="col-sm-7">
     <form  class="form-horizontal" action="/pacientes/index/" method="GET">
         {% csrf_token %}

             <div class ="panel panel-default">
                 <div class="panel-heading">Búsqueda</div>
                 <div class ="panel-body">
                     <div class="panel-group" id="accordion">
                         <div class="row">
                             <label for="nombre"  class="control-label col-sm-3">Paciente: </label>
                             <div class="col-sm-8">
                                 <input name="paciente_nombre"class="form-control" id="paciente_label" type="text" value="" placeholder="Ingrese número de Documento o Nombre"/>
                                 <input name="paciente" id="id_paciente" value="" type="hidden"/>
                             </div>
                             <div class="col-sm-1">
                                     <button type="button" id="limpiar" title="Limpiar" class="btn btn-default btn-circle"><i class="fa fa-eraser"></i></button>
                             </div>
                         </div>
                     </div>
                 </div>

                 <div class ="panel-footer">
                     <button class="btn btn-primary" type="submit"><i class="fa fa-search-plus"></i>Buscar</button>
                 </div>
             </div>

     </form>
</div>
 </div>
 <div class="row">
     {% block paciente %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title" align="left">Pacientes</h3>
            </div>

            <div class="panel-body">
                <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">

                        <thead>
                              <tr>
                                <th width="60">Número de Documento</th>
                                <th width="80">Nombre</th>
                                <th width="80">Apellidos</th>
                                <th width="30">Sexo</th>

                                <th width="70">Distrito</th>

                              </tr>
                        </thead>
                        <tbody>
                        {% for pacientes in pacientes %}

                        <tr>
                            <td>
                                <a href="{% url 'pacientes:paciente_editar' pacientes.id %}">{{ pacientes.nro_doc }}</a>
                            </td>
                            <td>{{ pacientes.nombres }}</td>
                            <td>{{ pacientes.apellidos }} </td>
                            <td>{{ pacientes.sexo }} </td>

                            <td>{{ pacientes.lugar_nacimiento }} </td>
                        </tr>
                        {% endfor %}

                        </tbody>
                </table>
                <div class="pagination" align="right">
                    <span class="step-links">
                            {% if pacientes.has_previous %}
                            <a class="btn btn-info" href="?page={{ pacientes.previous_page_number }}"><spam class="icon-chevron-left"></spam>PREVIO</a>

                            {% endif %}
                            <span class="current">
                                Páginas {{ pacientes.number }} de {{ pacientes.paginator.num_pages }}.
                            </span>

                            {% if pacientes.has_next %}
                                <a class="btn btn-info" href="?page={{ pacientes.next_page_number }}">SIGUIENTE<spam class="icon-chevron-right"></spam></a>
                            {% endif %}
                        </span>
                </div>

            </div>
        </div>
 </div>
     <br>

     <div class ="btn-group" >
             <a href="{% url 'pacientes:nuevo_paciente' %}" class="btn btn-primary" title="Crear un nuevo Paciente" role="button" >Crear Paciente <i class="fa fa-user"></i> </a>
     </div><br><br>


    {% endblock paciente %}

{% endblock %}